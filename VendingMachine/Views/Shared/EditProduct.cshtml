@model Product

<div class="modal-content">
	<div class="modal-header">
		<h4>@ViewData["Title"]</h4>
		<button class="close" data-dismiss="modal" area-hidden="true">X</button>
	</div>
	<div class="modal-body">
		<form asp-action="EditProduct" method="post">
			<input type="hidden" asp-for="ProductID" />
			<div class="form-group">
				<div><span asp-validation-for="Name" class="text-danger"></span></div>
				<label asp-for="Name"></label>
				<input asp-for="Name" class="form-control" />
			</div>
			<div class="form-group">
				<div><span asp-validation-for="ImageFilePath" class="text-danger"></span></div>
				<label asp-for="ImageFilePath"></label>
				<input asp-for="ImageFilePath" class="form-control" />
			</div>
			<div class="form-group">
				<div><span asp-validation-for="Price" class="text-danger"></span></div>
				<label asp-for="Price"></label>
				<input asp-for="Price" class="form-control" />
			</div>
			<div class="form-group">
				<div><span asp-validation-for="Count" class="text-danger"></span></div>
				<label asp-for="Count"></label>
				<input asp-for="Count" class="form-control" />
			</div>
			<div class="text-center">
				<button class="btn btn-primary" type="submit">Сохранить</button>
				<a asp-action="Index" class="btn btn-secondary">Отмена</a>
			</div>
		</form>
	</div>
</div>
@section Scripts {
	<script>
	$('.change').click(function () {
		$.ajax({
			method: "POST",
			contentType: "application/json; charset=utf-8",
			url: "Home/GiveChange",
			dataType: "json",
			headers: {
				RequestVerificationToken:
					$('input:hidden[name="__RequestVerificationToken"]').val()
			},
			success: function (response) {
				$('#change').empty();
				$('#change').append('<h4>Ваша сдача:</h4>');
				$.each(response, function (key, val) {
					$('#change').append('<p>' + key + ': ' + val + 'шт</p>');
				});
				$('.balance').html('0');
			},
			fail: function () {
				alert('error');
			}
		});
	});
	</script>
}
